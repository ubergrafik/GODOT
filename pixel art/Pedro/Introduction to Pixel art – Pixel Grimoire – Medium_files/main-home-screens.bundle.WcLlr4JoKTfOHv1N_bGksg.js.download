(function(z){
'use strict';var x0=function(a){z.J.call(this);this.C(a)},y0=function(a){z.zi.call(this);this.C(a)},z0=function(a){z.zi.call(this);this.C(a)},TNa=function(a,b){return z.t(a.Z.get(b),a.uZ,a)},UNa=function(a,b,c){return z.t(c?z.Wc(a.Aa.uZ(c)):TNa(a.Aa,b),function(c){a.ka.jc(c);var e=z.FL(a,b);z.ID(e,c.streamItems,c.paging);c.De=e})},A0=function(a){y0.apply(this,arguments)},B0=function(a){z0.apply(this,arguments)},VNa=function(a,b,c){var d=a.U.R(z.$q,{collectionSlug:b});return z.dE(a,d,function(){return UNa(this.wb,
d,c)})},WNa=function(a){if(!a.length)throw Error("getFirst called on an empty array");return a[0]},C0=function(){return(0,z.w)('\x3cdiv class\x3d"u-flex u-marginBottom24"\x3e\x3cdiv class\x3d"avatarPlaceholder u-height32 u-width32 u-flex0"\x3e\x3c/div\x3e\x3cdiv\x3e\x3cdiv class\x3d"linePlaceholder linePlaceholder--thin linePlaceholder--small"\x3e\x3c/div\x3e\x3cdiv class\x3d"linePlaceholder linePlaceholder--thin linePlaceholder--smaller"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e')},D0=function(){return(0,z.w)('\x3csection class\x3d"extremePostPreview u-marginBottom48 u-animation--shimmerInfinite"\x3e\x3cdiv class\x3d"extremePostPreview-post u-minWidth0 u-flex1 u-marginRight24 u-textAlignLeft"\x3e\x3cdiv class\x3d"u-clearfix u-marginBottom16"\x3e\x3cdiv class\x3d"linePlaceholder"\x3e\x3c/div\x3e\x3cdiv class\x3d"linePlaceholder"\x3e\x3c/div\x3e\x3cdiv class\x3d"linePlaceholder linePlaceholder--truncated"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"u-flex"\x3e\x3cdiv class\x3d"avatarPlaceholder u-height32 u-width32 u-flex0"\x3e\x3c/div\x3e\x3cdiv\x3e\x3cdiv class\x3d"linePlaceholder linePlaceholder--thin linePlaceholder--small"\x3e\x3c/div\x3e\x3cdiv class\x3d"linePlaceholder linePlaceholder--thin linePlaceholder--small"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"extremePostPreview-image u-background--brandDust u-flex0 u-width152 u-height145 u-xs-width80 u-xs-height72"\x3e\x3c/div\x3e\x3c/section\x3e')},
XNa=function(){return(0,z.w)('\x3cdiv class\x3d"u-marginBottom32 u-animation--shimmerInfinite"\x3e\x3cdiv class\x3d"u-marginRight32 u-marginLeft32 u-paddingBottom16 u-borderBottomLightest u-clearfix"\x3e\x3cdiv class\x3d"linePlaceholder linePlaceholder-thick linePlaceholder--small"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"u-padding32 u-clearfix"\x3e'+C0()+C0()+C0()+"\x3c/div\x3e\x3c/div\x3e")},E0=function(a){z.J.call(this);this.C(a)},YNa=function(a,b,c){return(0,z.w)('\x3cdiv class\x3d"u-textAlignLeft"\x3e\x3cp\x3eTry out the new publications beta. Simply go to Settings to turn it on.\x3c/p\x3e'+
z.x(z.$p({s:(0,z.M)("Got it"),action:"dismiss-popover",Qg:!0,isPrimary:!0},c))+"\x3c/div\x3e")},F0=function(a){z.NB.call(this,a);this.Z=a.get("request");this.U=a.get("route-builder");this.za=a.get("screen")},ZNa=function(a,b,c){b=null==a.collection.virtuals.permissions?null:a.collection.virtuals.permissions.canManageAll;if(c.variants.enable_aurora_nav&&b&&!a.bwa){b="";var d=""+z.Un(a,c),d=z.C(d);b+='\x3cdiv class\x3d"butterBar is-active"\x3e'+z.x(z.FB({BN:(0,z.M)('\x3cspan class\x3d"u-accentColor--textNormal u-fontWeightSemibold"\x3eNew!\x3c/span\x3e The publication beta now supports navigation. '+
z.x(z.O({href:(0,z.L)(""+z.E(d+"#aurora-beta")),s:(0,z.M)("Opt in now."),l:(0,z.M)("link--underline")},c)))}))+"\x3c/div\x3e";b=(0,z.w)(b)}else b="";a=""+(b+z.x(z.aS(a,c))+'\x3cdiv class\x3d"u-marginBottom40 js-collectionStream"\x3e'+((null==a.streamItems?0:a.streamItems.length)?z.x(z.YS({items:a.streamItems,context:c.j.Pa.VG,collection:a.collection},0,c)):'\x3cdiv class\x3d"u-textAlignCenter u-marginTop180 u-marginBottom180 js-streamItem js-noPosts"\x3e'+z.x(z.RO({JF:(0,z.M)("This publication does not have any stories yet.")}))+
"\x3c/div\x3e")+"\x3c/div\x3e"+z.x(z.jS(a,c))+z.x(z.kS({collection:a.collection,content:(0,z.M)(""+z.x(z.iS(a,c)))},c)));return(0,z.w)(a)},G0=function(a,b,c){z.RC.call(this,a,b,c);this.hd=b.collectionSlug;this.N4=this.bb=null;this.qa=a.get("popover");this.dj=a.get("referrer-tracker");this.Va=a.get("screen-request");this.Z=a.get("request");this.U=a.get("route-builder");this.rb=z.cm();this.Ya=null;this.$g=!!c.Ki},H0=function(a){z.NB.call(this,a);this.za=a.get("screen")},I0=function(a){z.NB.call(this,
a);this.za=a.get("screen");this.U=a.get("route-builder");this.Z=a.get("request")},J0=function(a){z.NB.call(this,a);this.za=a.get("screen")},K0=function(a){z.NB.call(this,a);this.za=a.get("screen")},$Na=function(a,b,c){var d=a.qG,e=a.streamItems;null==a.heroPromos||z.pa(a.heroPromos);var g=a.heroPromos;b="";var k=d==c.j.Pa.Wq,d='\x3cdiv class\x3d"js-homeStream"\x3e'+z.x(z.YS({items:e,context:d},0,c))+"\x3c/div\x3e",d=(0,z.M)(d);a=z.x(z.XT({navBar:a.navBar,vaa:k},c))+'\x3cdiv class\x3d"homeContainer u-clearfix js-homepage"\x3e'+
z.x(d)+(g&&g.length?z.x(z.hO({promo:g[0],Nwa:!0},c)):"");g='\x3cdiv class\x3d"'+z.D(z.C("u-foreground u-minHeight100vh"))+'"\x3e';k=(0,z.w)('\x3cdiv class\x3d"extreme-container12col u-flex u-marginTop48"\x3e\x3cdiv class\x3d"extreme-container8col u-width100pct u-flex1 u-borderBox u-paddingRight24 extreme-10colSizeFull extreme-10colPadding0 js-mainfeed"\x3e'+z.x(D0())+z.x(D0())+z.x(D0())+z.x(D0())+'\x3c/div\x3e\x3cdiv class\x3d"extreme-container4col u-flex0 extreme-10colHide u-heightInherit"\x3e\x3cdiv class\x3d"extremeSidebar extreme-container4col" data-scroll\x3d"dock" data-dock-offset\x3d"js-metabarBottom"\x3e\x3cdiv class\x3d"js-sidebar"\x3e'+
z.x(XNa())+z.x(XNa())+"\x3c/div\x3e"+z.x(z.wCa(null,c))+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e");c=""+(g+k+z.x(z.jS(null,c))+"\x3c/div\x3e");c=(0,z.w)(c);return(0,z.w)(b+(a+c+"\x3c/div\x3e"))},L0=function(a,b,c){z.RC.call(this,a,b,c);this.wa=a.get("app");this.Va=a.get("screen-request");a.get("routeManager").lg(this.path);this.wb=a.get("list-store");this.U=a.get("route-builder");this.lb=a.get("dom-monitor");this.Db=a.get("element-tracker");this.qa=a.get("popover");this.vu=this.Qn=this.Ya=null},aOa=
function(a){var b={},b=(b.ignoredIds=M0(a),b),b=a.U.R(z.Gsa,null,b);z.t(a.Va.Hb(b,z.aL,null,!1),function(b){var d=a.query(".js-sidebar");d&&(z.sx(d,z.YS,{items:b.streamItems,context:40}),a.Db.Ck())})},bOa=function(a){var b={},b=(b.ignoredIds=M0(a),b),c=z.or("forceRerankFeed");c&&(b.forceRerankFeed=c);var d=a.U.R(z.aG,null,b);z.t(a.Va.Hb(d,z.aL,null,!0),function(){var b=a.query(".js-mainfeed"),c=a.query(".js-homeStream"),k=a.wb.ym[d];if(k){var l=z.ky(k),n="section"===z.ni(l[0],"itemType"),q=n?l.slice(0,
1):[],l=n?l.slice(1):l;c&&0<q.length&&(z.sx(c,z.YS,{items:q,context:30}),z.gm(z.Xl).enable_mute&&(q=new z.LT(a.va(),k,q[0],30),q.Fa(c),a.track(q)),k.removeAt(0));b&&z.sx(b,z.YS,{items:l,context:39});c=new z.WR(a.va(),k);c.Fa(b);c.Md(39);c.Rt=!0;a.track(c);a.Qn=c}})},cOa=function(a){var b={},b=(b.ignoredIds=M0(a),b),c=z.or("forceRerankFeed");c&&(b.forceRerankFeed=c);var d=a.U.R(z.aG,null,b);z.t(a.Va.Hb(d,z.aL,null,!0),function(){var b=a.query(".js-mainfeed"),c=a.wb.ym[d];c&&(b&&z.sx(b,z.YS,{items:z.ky(c),
context:39}),c=new z.WR(a.va(),c),c.Fa(b),c.Md(39),c.Rt=!0,a.track(c),a.Qn=c)})},M0=function(a){return 0==z.ky(a.Ya).length?[]:WNa(z.ky(a.Ya)).section.items.map(function(a){return a.post.postId})};z.r(x0,z.J);x0.prototype.F=function(){return""};x0.prototype.H=function(){return""};x0.prototype.J=function(){return x0.prototype};
x0.prototype.D={name:"TopStoriesNavigation",L:!1,fields:{titleDateFormatted:{name:"titleDateFormatted",g:z.U,h:1},prevSlug:{name:"prevSlug",g:z.U,h:2},nextSlug:{name:"nextSlug",g:z.U,h:3}},N:{}};z.r(y0,z.zi);z.f=y0.prototype;z.f.F=function(){return""};z.f.H=function(){return""};z.f.Gb=function(){return z.G(this,"collection")};z.f.te=z.h(615);z.f.J=function(){return y0.prototype};
z.f.D={name:"CollectionPageStreamResponse",L:!1,fields:{collection:{name:"collection",g:function(){return z.tk},h:1},streamItems:{name:"streamItems",g:function(){return z.UK},X:z.S,h:2},paging:{name:"paging",g:function(){return z.Sk},h:3},header:{name:"header",g:function(){return z.nj},h:4}},N:{}};z.f.te=z.Y(615,function(){return z.G(this,"streamItems")});z.r(z0,z.zi);z.f=z0.prototype;z.f.F=function(){return""};z.f.H=function(){return""};z.f.te=z.h(612);z.f.IX=z.h(626);z.f.Ev=z.h(627);z.f.J=function(){return z0.prototype};
z.f.D={name:"HomepageStreamResponse",L:!1,fields:{streamItems:{name:"streamItems",g:function(){return z.UK},X:z.S,h:1},paging:{name:"paging",g:function(){return z.Sk},h:2},heroPromos:{name:"heroPromos",g:function(){return z.VH},X:z.S,h:3},browsableStreamConfigList:{name:"browsableStreamConfigList",isRemoved:z.S},browsableStreamConfigIndex:{name:"browsableStreamConfigIndex",isRemoved:z.S},catalog:{name:"catalog",g:function(){return z.pl},h:6},topStoriesNavigation:{name:"topStoriesNavigation",g:function(){return x0},
h:7},navBar:{name:"navBar",g:function(){return z.sL},h:8}},N:{}};z.f.Ev=z.Y(627,function(){return z.G(this,"navBar")});z.f.te=z.Y(612,function(){return z.G(this,"streamItems")});z.m(A0,y0);A0.prototype.C=function(){this.De=null;y0.prototype.C.call(this)};z.m(B0,z0);B0.prototype.C=function(){this.De=null;z0.prototype.C.call(this)};z.aB.prototype.uZ=z.Y(694,function(a){return this.Zb(A0,a)});z.aB.prototype.BZ=z.Y(688,function(a){return this.Zb(B0,a)});
z.aB.prototype.Zp=z.Y(687,function(a){return z.t(this.Z.get(a),this.BZ,this)});z.PD.prototype.Zp=z.Y(686,function(a,b,c){return z.t(b?z.Wc(this.Aa.BZ(b)):this.Aa.Zp(a),function(b){this.ka.jc(b);var e=z.FL(this,a);z.ID(e,b.streamItems,b.paging);c&&z.jy(e,"source",c);b.De=e},this)});z.cE.prototype.Zp=z.Y(685,function(a,b){return z.dE(this,a,function(){return this.wb.Zp(a,b)})});z0.prototype.IX=z.Y(626,function(){return z.G(this,"heroPromos")});
z.gy.prototype.removeAt=z.Y(601,function(a){return this.jd.length>a?this.remove(this.jd[a]):!1});z.r(E0,z.J);E0.prototype.F=function(){return""};E0.prototype.H=function(){return""};E0.prototype.J=function(){return E0.prototype};E0.prototype.D={name:"EntityClientPresented",L:!1,fields:{entityId:{name:"entityId",g:z.U,h:1},entityType:{name:"entityType",g:function(){return z.Gua},h:2}},N:{}};z.m(F0,z.NB);z.f=F0.prototype;
z.f.V=function(){z.NB.prototype.V.call(this);z.sy(this.za.S()).O("open-promo-link",this.sia,this)};z.f.ma=function(){z.NB.prototype.ma.call(this);z.sy(this.za.S()).clear("open-promo-link")};z.f.ct=function(a){Object.keys(a||{}).forEach(function(b){var c=a[b].getAttribute("data-collection-id");z.dz(z.qya,{promoId:b,collectionId:c})})};z.f.sia=function(a){var b=a.target.getAttribute("data-promo-id");a=a.target.getAttribute("data-collection-id");z.dz(z.rya,{promoId:b,collectionId:a});return 1};
z.f.Om=function(){return this.za.Xa(".js-trackedPromo")};z.f.Km=function(a){return a.getAttribute("data-promo-id")};z.m(G0,z.RC);z.f=G0.prototype;z.f.Uc=function(){return z.t(z.t(VNa(this.Va,this.hd),this.ac,this),this.Fd,this)};z.f.rd=function(a){return z.t(VNa(this.Va,this.hd,a),this.ac,this)};z.f.ac=function(a){z.SC(this,a);this.bb=a.collection;this.N4=a.header;this.Ya=a.De};z.f.Fd=function(){(this.rb.userDismissableFlags||[]).includes(2);z.sx(this.Wa,ZNa,{collection:this.bb,header:this.N4,streamItems:z.ky(this.Ya),bwa:!1})};
z.f.V=function(){z.RC.prototype.V.call(this);var a={collectionId:this.bb.sb()};z.dz(z.pya,a);this.$g&&this.xV();767>=window.innerWidth||(this.a7(),z.Ey(this,this.Ya,"add",this.a7.bind(this)));this.Ya.bl?z.Ey(this,this.Ya,"done",this.L7.bind(this)):this.L7()};
z.f.bc=function(){this.track(new z.UR(this.va()));this.track(new F0(this.va()));this.track(new z.eT(this.va()));var a=this.query(".js-collectionStream"),b=this.rb.Za()==this.bb.creatorId;z.xv(this.bb,30);var c=z.yv(this.bb);!z.rl().isMobile&&b&&!c&&1!==this.rb.collectionOnboardingSeen&&(b=this.query(".js-pubManageMenu"))&&(z.Oz(z.Qz(z.Rz(this.qa).Ua(YNa),b).lf(this.S()),{jN:!0,cxa:!0}).aa(),b=this.U.R(z.mua,{userId:this.rb.Za()}),this.Z.put(b,{versionId:1}));b=new z.WR(this.va(),this.Ya);b.Md(14);
b.Fa(a);this.track(b)};z.f.PX=function(){return new z.BY({collectionId:this.bb.sb()})};z.f.xV=function(){var a=this.query(".js-pubManageMenu");a&&z.Oz(z.Qz(z.Rz(this.qa).Ua(z.ODa,{title:z.rx(z.$Da),iv:z.rx(z.ZDa),J_:!0}),a).lf(this.S()),{jN:!0}).aa()};z.f.a7=function(){var a=this.query(".js-aboutCollectionBox");a&&z.sx(a,z.qQ,{collection:this.bb})};z.f.L7=function(){var a=this.query(".js-collectionFooter");z.wu(a)};z.m(H0,z.NB);H0.prototype.Om=function(){return this.za.Xa(".js-trackedEntity")};H0.prototype.Km=function(a){return a.getAttribute("data-entity-id")};H0.prototype.ct=function(a){a=a||{};z.kb(a,function(a,c){a=Number(a.getAttribute("data-entity-type"));!a||(0,window.isNaN)(a)?window.console.error("Entity "+c+" does not have an entity type."):(c=(new E0({entityId:c,entityType:a})).Mb(),z.dz(z.Iya,c))})};z.m(I0,z.NB);z.f=I0.prototype;z.f.Om=function(){return this.za.Xa(".js-promo")};z.f.Km=function(a){return a.getAttribute("data-promo-id")};z.f.V=function(){z.NB.prototype.V.call(this);z.sy(this.za.S()).O("promo-clicked",this.$na,this)};z.f.ma=function(){z.sy(this.za.S()).clear("promo-clicked");z.NB.prototype.ma.call(this)};z.f.ct=function(a){var b=this;a=a||{};Object.keys(a).forEach(function(a){z.u(b.Z.post(b.U.R(z.xva,{promoId:a}),null,{background:!0}),z.ay);z.dz(z.Pya,{promoId:a})})};
z.f.$na=function(a){a.value&&z.dz(z.Qya,{promoId:a.value});return 1};z.m(J0,z.NB);J0.prototype.Om=function(){return this.za.Xa(".js-trackedSequence")};J0.prototype.Km=function(a){return a.getAttribute("data-sequence-id")};J0.prototype.ct=function(a){a=a||{};z.mb(a).forEach(function(a){z.dz(z.hza,{sequenceId:a})})};z.m(K0,z.NB);K0.prototype.Om=function(){return this.za.Xa(".js-trackedTopic")};K0.prototype.Km=function(a){return a.getAttribute("data-topic-id")};K0.prototype.Mx=function(a){return a.getAttribute("data-source")||""};K0.prototype.ct=function(a){var b=this;a=a||{};z.mb(a).forEach(function(c){var d=b.Mx(a[c]);z.dz(z.Jya,{topicId:c,source:d})})};z.m(L0,z.RC);z.f=L0.prototype;z.f.Uc=function(){return z.t(z.t(this.Va.Zp(this.path),this.x4,this),this.Fd,this)};z.f.fo=function(){return z.sl()?767>=window.innerWidth?"gentle":"aggressive":"none"};z.f.rd=function(a){return z.t(this.Va.Zp(this.path,a),this.x4,this)};z.f.bc=function(){this.track(new I0(this.va()));this.track(new z.UR(this.va()));this.track(new K0(this.va()));this.track(new H0(this.va()));this.track(new z.eT(this.va()));this.track(new J0(this.va()));this.GC();this.PS()};
z.f.V=function(){var a=this;z.RC.prototype.V.call(this);var b={};b.count=this.Ya.re();var c;a:switch(z.em()?30:1){case 30:c="grid_home";break a;default:c="reading_list"}b.context=c;z.dz(z.Cwa,b);z.ez(z.AD,{experimentId:"b2b7b1f9abb6"});var b=this.Xa(".js-metabar .js-metabarGetStarted"),d=this.Nu;d&&!z.wv(b)&&(0,z.hb)(b,function(b){z.Ey(a,d,"affix",function(){z.wu(b)});z.Ey(a,d,"dock",function(){z.vu(b)})});z.gm(z.Xl).enable_expanded_feature_chunk_pool?bOa(this):cOa(this);aOa(this);z.gm(z.Xl).enable_branch_io&&
z.uQ({is_logged_in:z.em(),is_member:!!z.cm().mediumMemberAt,in_app_browser:"Null",layer_cake:"Null",loaded:!0,num_nonmoc_posts_in_month:0,num_posts_in_day:0,num_posts_in_week:0,num_posts_in_month:0,medium_member_at:"Null",meter_state:"not_metered",page_type:"home",post_creator_id:"Null",post_creator_name:"Null",post_publication_id:"Null",post_publication_name:"Null",post_topic_name:"Null",post_topic_slug:"Null",profile_name:"Null",profile_photo:"Null",profile_username:"Null",source:"Null",user_created_at:"Null",
following_pub:!1,following_topic:!1,following_author:!1})};z.f.PS=function(){var a=this.query(".js-homeStream");if(a){var b=new z.WR(this.va(),this.Ya);b.Fa(a);b.Md(z.em()?30:1);b.Rt=!0;this.track(b);this.Qn=b}};z.f.x4=function(a){this.Ya=z.GM(a.De,25);this.vu=a.Ev()};z.f.Fd=function(a){z.SC(this,a);a={navBar:a.Ev(),streamItems:z.ky(this.Ya),qG:z.em()?30:1,heroPromos:a.IX()};z.sx(this.Wa,$Na,a)};z.f.GC=function(){this.vu&&this.track(new z.gU(this.va(),this.vu))};var dOa=z.Ny;z.Qy(z.Qy(dOa.va().scope("app"),"CollectionHomeScreen",G0),"HomeScreen",L0);z.KM(dOa,"home-screens");}).call(this, _mdm);
